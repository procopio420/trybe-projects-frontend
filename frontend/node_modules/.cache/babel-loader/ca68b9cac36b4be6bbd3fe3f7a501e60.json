{"ast":null,"code":"var _jsxFileName = \"/home/procopio/Projetos/trybe-github/src/pages/Repository/index.tsx\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiChevronRight, FiUsers } from 'react-icons/fi';\nimport api, { my_api } from '../../services/api';\nimport logoImg from '../../assets/trybe.png';\nimport { Header, RepositoryInfo, Issues } from './styles';\n\nconst Repository = () => {\n  const {\n    params\n  } = useRouteMatch();\n  const [repository, setRepository] = useState(null);\n  const [pullRequests, setPullRequests] = useState([]);\n  const [pullRequestsWithCRRequest, setPullRequestsWithCRRequest] = useState([]);\n  const [helpNumber, setHelpNumber] = useState(0);\n  const [crNumber, setCrNumber] = useState(0);\n  const [dataToShow, setDataToShow] = useState([]);\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then(response => {\n      setRepository(response.data);\n    });\n    api.get(`repos/${params.repository}/pulls?per_page=100`).then(response => {\n      setPullRequests(response.data);\n    });\n  }, [params.repository]);\n  useEffect(() => {\n    let helps = 0;\n    let crs = 0;\n\n    for (let pull of pullRequests) {\n      pull.helpWanted = false;\n      pull.codeReview = false;\n\n      if (pull.labels.length > 0) {\n        for (let i = 0; i < pull.labels.length; i++) {\n          if (pull.labels[i].name === 'help wanted') {\n            helps++;\n            pull.helpWanted = true;\n          }\n\n          if (pull.labels[i].name === 'code-review') {\n            crs++;\n            pull.codeReview = true;\n            setPullRequestsWithCRRequest([...pullRequestsWithCRRequest, pull]);\n          }\n        }\n      }\n    }\n\n    my_api.post('/', {\n      dupla1: 'lucas',\n      dupla2: 'filipe'\n    });\n    setDataToShow(pullRequests);\n    setCrNumber(crs);\n    setHelpNumber(helps);\n  }, [pullRequests, pullRequestsWithCRRequest]);\n\n  function shuffle(array) {\n    let currentIndex = array.length,\n        temporaryValue,\n        randomIndex;\n\n    while (0 !== currentIndex) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n  }\n\n  function sendDuplasToServer() {\n    let randomDuplas = shuffle(pullRequestsWithCRRequest);\n\n    if (randomDuplas.length % 2 === 0) {\n      for (let i = 0; i < randomDuplas.length; i += 2) {\n        my_api.post('/', {\n          dupla1: randomDuplas[i].user.login,\n          dupla2: randomDuplas[i + 1].user.login\n        });\n      }\n    } else {\n      for (let i = 0; i < randomDuplas.length - 1; i += 2) {\n        my_api.post('/', {\n          dupla1: randomDuplas[i].user.login,\n          dupla2: randomDuplas[i + 1].user.login\n        });\n      }\n    }\n  }\n\n  useCallback(() => {\n    sendDuplasToServer();\n  }, [sendDuplasToServer]);\n\n  function handleHelpButton() {\n    const newPullRequests = pullRequests.filter(pull => pull.helpWanted);\n    setDataToShow(newPullRequests);\n  }\n\n  function handleCRButton() {\n    const newPullRequests = pullRequests.filter(pull => pull.codeReview);\n    setDataToShow(newPullRequests);\n  }\n\n  function handlePRButton() {\n    setDataToShow(pullRequests);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    width: 150,\n    alt: \"Trybe - Projects Explorer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/trybe-projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FiChevronLeft, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }), \"Voltar\")), repository && /*#__PURE__*/React.createElement(RepositoryInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: repository.owner.avatar_url,\n    alt: repository.owner.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, repository.name)), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FiUsers, {\n    size: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }), \"Ver duplas de CR\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handleHelpButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, helpNumber), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, \"Pedido(s) de ajuda\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handleCRButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, crNumber), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, \"Pedido(s) de Code Review\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handlePRButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, repository.open_issues_count), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, \"Pull Requests\"))))), /*#__PURE__*/React.createElement(Issues, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, dataToShow.filter(pull => {\n    return pull.user.login !== 'tryber';\n  }).sort((a, b) => {\n    if (a.codeReview && !b.codeReview) {\n      return -1;\n    }\n\n    if (a.helpWanted && !b.helpWanted) {\n      return -1;\n    }\n\n    return 1;\n  }).map(pull => /*#__PURE__*/React.createElement(\"a\", {\n    key: pull.id,\n    href: pull.html_url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: pull.user.avatar_url,\n    alt: pull.user.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }, pull.user.login), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 17\n    }\n  }, pull.title)), pull.helpWanted && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 35\n    }\n  }, \"Ajuda\"), pull.codeReview && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"green\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 35\n    }\n  }, \"Code Review\"), /*#__PURE__*/React.createElement(FiChevronRight, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default Repository;","map":{"version":3,"sources":["/home/procopio/Projetos/trybe-github/src/pages/Repository/index.tsx"],"names":["React","useEffect","useState","useCallback","useRouteMatch","Link","FiChevronLeft","FiChevronRight","FiUsers","api","my_api","logoImg","Header","RepositoryInfo","Issues","Repository","params","repository","setRepository","pullRequests","setPullRequests","pullRequestsWithCRRequest","setPullRequestsWithCRRequest","helpNumber","setHelpNumber","crNumber","setCrNumber","dataToShow","setDataToShow","get","then","response","data","helps","crs","pull","helpWanted","codeReview","labels","length","i","name","post","dupla1","dupla2","shuffle","array","currentIndex","temporaryValue","randomIndex","Math","floor","random","sendDuplasToServer","randomDuplas","user","login","handleHelpButton","newPullRequests","filter","handleCRButton","handlePRButton","owner","avatar_url","open_issues_count","sort","a","b","map","id","html_url","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiChevronRight, FiUsers } from 'react-icons/fi';\nimport api, { my_api } from '../../services/api';\n\nimport logoImg from '../../assets/trybe.png';\n\nimport { Header, RepositoryInfo, Issues } from './styles';\n\ninterface RepositoryParams {\n  repository: string;\n}\n\ninterface Repository {\n  full_name: string;\n  name: string;\n  description: string;\n  stargazers_count: number;\n  forks_count: number;\n  open_issues_count: number;\n  owner: {\n    login: string;\n    avatar_url: string;\n  };\n}\n\ninterface PullRequest {\n  title: string;\n  id: number;\n  html_url: string;\n  mergeable_state: string | undefined;\n  user: {\n    login: string;\n    url: string;\n    avatar_url: string;\n  };\n  number: number;\n  labels: [\n    {\n      name: string;\n    },\n  ];\n  codeReview: boolean;\n  helpWanted: boolean;\n}\n\nconst Repository: React.FC = () => {\n  const { params } = useRouteMatch<RepositoryParams>();\n\n  const [repository, setRepository] = useState<Repository | null>(null);\n  const [pullRequests, setPullRequests] = useState<PullRequest[]>([]);\n  const [pullRequestsWithCRRequest, setPullRequestsWithCRRequest] = useState<\n    PullRequest[]\n  >([]);\n  const [helpNumber, setHelpNumber] = useState(0);\n  const [crNumber, setCrNumber] = useState(0);\n\n  const [dataToShow, setDataToShow] = useState<PullRequest[]>([]);\n\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then((response) => {\n      setRepository(response.data);\n    });\n    api\n      .get(`repos/${params.repository}/pulls?per_page=100`)\n      .then((response) => {\n        setPullRequests(response.data);\n      });\n  }, [params.repository]);\n  useEffect(() => {\n    let helps = 0;\n    let crs = 0;\n    for (let pull of pullRequests) {\n      pull.helpWanted = false;\n      pull.codeReview = false;\n      if (pull.labels.length > 0) {\n        for (let i = 0; i < pull.labels.length; i++) {\n          if (pull.labels[i].name === 'help wanted') {\n            helps++;\n            pull.helpWanted = true;\n          }\n          if (pull.labels[i].name === 'code-review') {\n            crs++;\n            pull.codeReview = true;\n            setPullRequestsWithCRRequest([...pullRequestsWithCRRequest, pull]);\n          }\n        }\n      }\n    }\n\n    my_api.post('/', {\n      dupla1: 'lucas',\n      dupla2: 'filipe',\n    });\n\n    setDataToShow(pullRequests);\n    setCrNumber(crs);\n    setHelpNumber(helps);\n  }, [pullRequests, pullRequestsWithCRRequest]);\n\n  function shuffle(array: PullRequest[]) {\n    let currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n\n    while (0 !== currentIndex) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n  }\n\n  function sendDuplasToServer() {\n    let randomDuplas = shuffle(pullRequestsWithCRRequest);\n    if (randomDuplas.length % 2 === 0) {\n      for (let i = 0; i < randomDuplas.length; i += 2) {\n        my_api.post('/', {\n          dupla1: randomDuplas[i].user.login,\n          dupla2: randomDuplas[i + 1].user.login,\n        });\n      }\n    } else {\n      for (let i = 0; i < randomDuplas.length - 1; i += 2) {\n        my_api.post('/', {\n          dupla1: randomDuplas[i].user.login,\n          dupla2: randomDuplas[i + 1].user.login,\n        });\n      }\n    }\n  }\n\n  useCallback(() => {\n    sendDuplasToServer();\n  }, [sendDuplasToServer]);\n\n  function handleHelpButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.helpWanted);\n    setDataToShow(newPullRequests);\n  }\n  function handleCRButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.codeReview);\n    setDataToShow(newPullRequests);\n  }\n  function handlePRButton() {\n    setDataToShow(pullRequests);\n  }\n\n  return (\n    <>\n      <Header>\n        <img src={logoImg} width={150} alt=\"Trybe - Projects Explorer\" />\n        <Link to=\"/trybe-projects\">\n          <FiChevronLeft size={16} />\n          Voltar\n        </Link>\n      </Header>\n\n      {repository && (\n        <RepositoryInfo>\n          <header>\n            <img\n              src={repository.owner.avatar_url}\n              alt={repository.owner.login}\n            />\n            <div>\n              <strong>{repository.name}</strong>\n            </div>\n            <button>\n              <FiUsers size={24} />\n              Ver duplas de CR\n            </button>\n          </header>\n          <ul>\n            <li>\n              <Link to=\"#\" onClick={handleHelpButton}>\n                <strong>{helpNumber}</strong>\n                <span>Pedido(s) de ajuda</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handleCRButton}>\n                <strong>{crNumber}</strong>\n                <span>Pedido(s) de Code Review</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handlePRButton}>\n                <strong>{repository.open_issues_count}</strong>\n                <span>Pull Requests</span>\n              </Link>\n            </li>\n          </ul>\n        </RepositoryInfo>\n      )}\n\n      <Issues>\n        {dataToShow\n          .filter((pull) => {\n            return pull.user.login !== 'tryber';\n          })\n          .sort((a, b): number => {\n            if (a.codeReview && !b.codeReview) {\n              return -1;\n            }\n            if (a.helpWanted && !b.helpWanted) {\n              return -1;\n            }\n            return 1;\n          })\n          .map((pull) => (\n            <a key={pull.id} href={pull.html_url}>\n              <img src={pull.user.avatar_url} alt={pull.user.login} />\n              <div>\n                <strong>{pull.user.login}</strong>\n                <p>{pull.title}</p>\n              </div>\n              {pull.helpWanted && <span className=\"red\">Ajuda</span>}\n              {pull.codeReview && <span className=\"green\">Code Review</span>}\n              <FiChevronRight size={20} />\n            </a>\n          ))}\n      </Issues>\n    </>\n  );\n};\n\nexport default Repository;\n"]},"metadata":{},"sourceType":"module"}