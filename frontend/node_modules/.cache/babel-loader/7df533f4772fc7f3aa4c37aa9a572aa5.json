{"ast":null,"code":"var _jsxFileName = \"/home/procopio/Projetos/trybe-github/src/pages/AdminRepository/index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiUsers, FiPlusCircle, FiRefreshCcw } from 'react-icons/fi';\nimport Modal from 'react-bootstrap/Modal';\nimport api, { my_api } from '../../services/api';\nimport logoImg from '../../assets/trybe.png';\nimport { Header, RepositoryInfo, TableContainer } from './styles';\n\nconst AdminRepository = () => {\n  const {\n    params\n  } = useRouteMatch();\n  const [repository, setRepository] = useState(null);\n  const [pullRequests, setPullRequests] = useState([]);\n  const [duplas, setDuplas] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then(response => {\n      setRepository(response.data);\n    });\n    api.get(`repos/${params.repository}/pulls?per_page=100`).then(response => {\n      setPullRequests(response.data);\n    });\n  }, [params.repository]);\n  useEffect(() => {\n    if (repository) {\n      my_api.get(`/${repository === null || repository === void 0 ? void 0 : repository.id}`).then(response => {\n        setDuplas(response.data);\n      });\n    }\n  }, [repository, pullRequests]);\n\n  async function createDuplas() {\n    const prWithCr = pullRequests.filter(pull => pull.codeReview);\n    const namesOnPrWithCr = prWithCr.map(pull => pull.user.login);\n    my_api.post(`/${repository === null || repository === void 0 ? void 0 : repository.id}`, namesOnPrWithCr);\n  }\n\n  async function handleDuplasButton() {\n    createDuplas();\n    handleOpenModal();\n  }\n\n  const handleOpenModal = () => setShowModal(true);\n\n  const handleCloseModal = () => setShowModal(false);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    width: 150,\n    alt: \"Trybe - Projects Explorer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/trybe-projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FiChevronLeft, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }), \"Voltar\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, \"eheheheh\")), repository && /*#__PURE__*/React.createElement(RepositoryInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: repository.owner.avatar_url,\n    alt: repository.owner.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, repository.name))), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiPlusCircle, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, \"Gerar duplas\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiRefreshCcw, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Atualizar duplas\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiUsers, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Ver duplas\"))))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: handleCloseModal,\n    size: 'lg',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Duplas de Code Review\"), duplas.map((dupla, index) => /*#__PURE__*/React.createElement(\"section\", {\n    key: dupla.dupla1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, dupla.dupla1), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"->\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, dupla.dupla2)))))));\n};\n\nexport default AdminRepository;","map":{"version":3,"sources":["/home/procopio/Projetos/trybe-github/src/pages/AdminRepository/index.tsx"],"names":["React","useEffect","useState","useRouteMatch","Link","FiChevronLeft","FiUsers","FiPlusCircle","FiRefreshCcw","Modal","api","my_api","logoImg","Header","RepositoryInfo","TableContainer","AdminRepository","params","repository","setRepository","pullRequests","setPullRequests","duplas","setDuplas","showModal","setShowModal","get","then","response","data","id","createDuplas","prWithCr","filter","pull","codeReview","namesOnPrWithCr","map","user","login","post","handleDuplasButton","handleOpenModal","handleCloseModal","owner","avatar_url","name","dupla","index","dupla1","dupla2"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,aAAT,EAAwBC,IAAxB,QAAoC,kBAApC;AACA,SACEC,aADF,EAEEC,OAFF,EAGEC,YAHF,EAIEC,YAJF,QAKO,gBALP;AAMA,OAAOC,KAAP,MAAkB,uBAAlB;AAEA,OAAOC,GAAP,IAAcC,MAAd,QAA4B,oBAA5B;AAEA,OAAOC,OAAP,MAAoB,wBAApB;AAEA,SAASC,MAAT,EAAiBC,cAAjB,EAAiCC,cAAjC,QAAuD,UAAvD;;AA8CA,MAAMC,eAAyB,GAAG,MAAM;AACtC,QAAM;AAAEC,IAAAA;AAAF,MAAad,aAAa,EAAhC;AAEA,QAAM,CAACe,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAoB,IAApB,CAA5C;AACA,QAAM,CAACkB,YAAD,EAAeC,eAAf,IAAkCnB,QAAQ,CAAgB,EAAhB,CAAhD;AAEA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAAU,EAAV,CAApC;AAEA,QAAM,CAACsB,SAAD,EAAYC,YAAZ,IAA4BvB,QAAQ,CAAU,KAAV,CAA1C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdS,IAAAA,GAAG,CAACgB,GAAJ,CAAS,SAAQT,MAAM,CAACC,UAAW,EAAnC,EAAsCS,IAAtC,CAA4CC,QAAD,IAAc;AACvDT,MAAAA,aAAa,CAACS,QAAQ,CAACC,IAAV,CAAb;AACD,KAFD;AAGAnB,IAAAA,GAAG,CACAgB,GADH,CACQ,SAAQT,MAAM,CAACC,UAAW,qBADlC,EAEGS,IAFH,CAESC,QAAD,IAAc;AAClBP,MAAAA,eAAe,CAACO,QAAQ,CAACC,IAAV,CAAf;AACD,KAJH;AAKD,GATQ,EASN,CAACZ,MAAM,CAACC,UAAR,CATM,CAAT;AAWAjB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiB,UAAJ,EAAgB;AACdP,MAAAA,MAAM,CAACe,GAAP,CAAY,IAAGR,UAAJ,aAAIA,UAAJ,uBAAIA,UAAU,CAAEY,EAAG,EAA9B,EAAiCH,IAAjC,CAAuCC,QAAD,IAAc;AAClDL,QAAAA,SAAS,CAACK,QAAQ,CAACC,IAAV,CAAT;AACD,OAFD;AAGD;AACF,GANQ,EAMN,CAACX,UAAD,EAAaE,YAAb,CANM,CAAT;;AAQA,iBAAeW,YAAf,GAA8B;AAC5B,UAAMC,QAAQ,GAAGZ,YAAY,CAACa,MAAb,CAAqBC,IAAD,IAAUA,IAAI,CAACC,UAAnC,CAAjB;AACA,UAAMC,eAAe,GAAGJ,QAAQ,CAACK,GAAT,CAAcH,IAAD,IAAUA,IAAI,CAACI,IAAL,CAAUC,KAAjC,CAAxB;AACA5B,IAAAA,MAAM,CAAC6B,IAAP,CAAa,IAAGtB,UAAJ,aAAIA,UAAJ,uBAAIA,UAAU,CAAEY,EAAG,EAA/B,EAAkCM,eAAlC;AACD;;AAED,iBAAeK,kBAAf,GAAoC;AAClCV,IAAAA,YAAY;AACZW,IAAAA,eAAe;AAChB;;AAED,QAAMA,eAAe,GAAG,MAAMjB,YAAY,CAAC,IAAD,CAA1C;;AACA,QAAMkB,gBAAgB,GAAG,MAAMlB,YAAY,CAAC,KAAD,CAA3C;;AAEA,sBACE,uDACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEb,OAAV;AAAmB,IAAA,KAAK,EAAE,GAA1B;AAA+B,IAAA,GAAG,EAAC,2BAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,iBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAe,IAAA,IAAI,EAAE,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,WAFF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,CADF,EAUGM,UAAU,iBACT,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,GAAG,EAAEA,UAAU,CAAC0B,KAAX,CAAiBC,UADxB;AAEE,IAAA,GAAG,EAAE3B,UAAU,CAAC0B,KAAX,CAAiBL,KAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASrB,UAAU,CAAC4B,IAApB,CADF,CALF,CADF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAE,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,CADF,CADF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAE,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,CADF,CAPF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CADF,CAbF,CAVF,CAXJ,eA4CE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAEtB,SAAb;AAAwB,IAAA,MAAM,EAAEmB,gBAAhC;AAAkD,IAAA,IAAI,EAAE,IAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEGrB,MAAM,CAACe,GAAP,CAAW,CAACU,KAAD,EAAQC,KAAR,kBACV;AAAS,IAAA,GAAG,EAAED,KAAK,CAACE,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIF,KAAK,CAACE,MAAV,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIF,KAAK,CAACG,MAAV,CAHF,CADD,CAFH,CADF,CADF,CA5CF,CADF;AA6DD,CAxGD;;AA0GA,eAAelC,eAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport {\n  FiChevronLeft,\n  FiUsers,\n  FiPlusCircle,\n  FiRefreshCcw,\n} from 'react-icons/fi';\nimport Modal from 'react-bootstrap/Modal';\n\nimport api, { my_api } from '../../services/api';\n\nimport logoImg from '../../assets/trybe.png';\n\nimport { Header, RepositoryInfo, TableContainer } from './styles';\n\ninterface RepositoryParams {\n  repository: string;\n}\n\ninterface Repository {\n  id: number;\n  full_name: string;\n  name: string;\n  description: string;\n  stargazers_count: number;\n  forks_count: number;\n  open_issues_count: number;\n  owner: {\n    login: string;\n    avatar_url: string;\n  };\n}\n\ninterface PullRequest {\n  title: string;\n  id: number;\n  html_url: string;\n  mergeable_state: string | undefined;\n  user: {\n    login: string;\n    url: string;\n    avatar_url: string;\n  };\n  number: number;\n  labels: [\n    {\n      name: string;\n    },\n  ];\n  codeReview: boolean;\n  helpWanted: boolean;\n  jaTemDupla: boolean;\n}\n\ninterface Dupla {\n  dupla1: string;\n  dupla2: string;\n}\n\nconst AdminRepository: React.FC = () => {\n  const { params } = useRouteMatch<RepositoryParams>();\n\n  const [repository, setRepository] = useState<Repository | null>(null);\n  const [pullRequests, setPullRequests] = useState<PullRequest[]>([]);\n\n  const [duplas, setDuplas] = useState<Dupla[]>([]);\n\n  const [showModal, setShowModal] = useState<Boolean>(false);\n\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then((response) => {\n      setRepository(response.data);\n    });\n    api\n      .get(`repos/${params.repository}/pulls?per_page=100`)\n      .then((response) => {\n        setPullRequests(response.data);\n      });\n  }, [params.repository]);\n\n  useEffect(() => {\n    if (repository) {\n      my_api.get(`/${repository?.id}`).then((response) => {\n        setDuplas(response.data);\n      });\n    }\n  }, [repository, pullRequests]);\n\n  async function createDuplas() {\n    const prWithCr = pullRequests.filter((pull) => pull.codeReview);\n    const namesOnPrWithCr = prWithCr.map((pull) => pull.user.login);\n    my_api.post(`/${repository?.id}`, namesOnPrWithCr);\n  }\n\n  async function handleDuplasButton() {\n    createDuplas();\n    handleOpenModal();\n  }\n\n  const handleOpenModal = () => setShowModal(true);\n  const handleCloseModal = () => setShowModal(false);\n\n  return (\n    <>\n      <Header>\n        <img src={logoImg} width={150} alt=\"Trybe - Projects Explorer\" />\n        <Link to=\"/trybe-projects\">\n          <FiChevronLeft size={16} />\n          Voltar\n        </Link>\n        <h1>eheheheh</h1>\n      </Header>\n\n      {repository && (\n        <RepositoryInfo>\n          <header>\n            <img\n              src={repository.owner.avatar_url}\n              alt={repository.owner.login}\n            />\n            <div>\n              <strong>{repository.name}</strong>\n            </div>\n          </header>\n          <ul>\n            <li>\n              <Link to=\"#\">\n                <FiPlusCircle size={20} />\n                <span>Gerar duplas</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\">\n                <FiRefreshCcw size={20} />\n                <span>Atualizar duplas</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\">\n                <FiUsers size={20} />\n                <span>Ver duplas</span>\n              </Link>\n            </li>\n          </ul>\n        </RepositoryInfo>\n      )}\n\n      <Modal show={showModal} onHide={handleCloseModal} size={'lg'}>\n        <Modal.Body>\n          <TableContainer>\n            <h1>Duplas de Code Review</h1>\n            {duplas.map((dupla, index) => (\n              <section key={dupla.dupla1}>\n                <p>{dupla.dupla1}</p>\n                <strong>-></strong>\n                <p>{dupla.dupla2}</p>\n              </section>\n            ))}\n          </TableContainer>\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n};\n\nexport default AdminRepository;\n"]},"metadata":{},"sourceType":"module"}