{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/procopio/Projetos/trybe-github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/procopio/Projetos/trybe-github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useRouteMatch,Link}from'react-router-dom';import{FiChevronLeft,FiChevronRight}from'react-icons/fi';import api from'../../services/api';import logoImg from'../../assets/trybe.png';import{Header,RepositoryInfo,Issues}from'./styles';var Repository=function Repository(){var _useRouteMatch=useRouteMatch(),params=_useRouteMatch.params;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),repository=_useState2[0],setRepository=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pullRequests=_useState4[0],setPullRequests=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),helpNumber=_useState6[0],setHelpNumber=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),crNumber=_useState8[0],setCrNumber=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),dataToShow=_useState10[0],setDataToShow=_useState10[1];useEffect(function(){api.get(\"repos/\".concat(params.repository)).then(function(response){setRepository(response.data);});api.get(\"repos/\".concat(params.repository,\"/pulls?per_page=100\")).then(function(response){setPullRequests(response.data);});},[params.repository]);useEffect(function(){var helps=0;var crs=0;var _iterator=_createForOfIteratorHelper(pullRequests),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var pull=_step.value;pull.helpWanted=false;pull.codeReview=false;if(pull.labels.length>0){for(var i=0;i<pull.labels.length;i++){if(pull.labels[i].name==='help wanted'){helps++;pull.helpWanted=true;}if(pull.labels[i].name==='code-review'){crs++;pull.codeReview=true;}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}setDataToShow(pullRequests);setCrNumber(crs);setHelpNumber(helps);},[pullRequests]);function handleHelpButton(){var newPullRequests=pullRequests.filter(function(pull){return pull.helpWanted;});setDataToShow(newPullRequests);}function handleCRButton(){var newPullRequests=pullRequests.filter(function(pull){return pull.codeReview;});setDataToShow(newPullRequests);}function handlePRButton(){setDataToShow(pullRequests);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(\"img\",{src:logoImg,width:150,alt:\"Trybe - Projects Explorer\"}),/*#__PURE__*/React.createElement(Link,{to:\"/trybe-projects\"},/*#__PURE__*/React.createElement(FiChevronLeft,{size:16}),\"Voltar\")),repository&&/*#__PURE__*/React.createElement(RepositoryInfo,null,/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"img\",{src:repository.owner.avatar_url,alt:repository.owner.login}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,repository.name))),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:handleHelpButton},/*#__PURE__*/React.createElement(\"strong\",null,helpNumber),/*#__PURE__*/React.createElement(\"span\",null,\"Pedido(s) de ajuda\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:handleCRButton},/*#__PURE__*/React.createElement(\"strong\",null,crNumber),/*#__PURE__*/React.createElement(\"span\",null,\"Pedido(s) de Code Review\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:handlePRButton},/*#__PURE__*/React.createElement(\"strong\",null,repository.open_issues_count),/*#__PURE__*/React.createElement(\"span\",null,\"Pull Requests\"))))),/*#__PURE__*/React.createElement(Issues,null,dataToShow.filter(function(pull){return pull.user.login!=='tryber';}).sort(function(a,b){if(a.codeReview&&!b.codeReview){return-1;}if(a.helpWanted&&!b.helpWanted){return-1;}return 1;}).map(function(pull){return/*#__PURE__*/React.createElement(\"a\",{key:pull.id,href:pull.html_url},/*#__PURE__*/React.createElement(\"img\",{src:pull.user.avatar_url,alt:pull.user.login}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,pull.user.login),/*#__PURE__*/React.createElement(\"p\",null,pull.title)),pull.helpWanted&&/*#__PURE__*/React.createElement(\"span\",{className:\"red\"},\"Ajuda\"),pull.codeReview&&/*#__PURE__*/React.createElement(\"span\",{className:\"green\"},\"Code Review\"),/*#__PURE__*/React.createElement(FiChevronRight,{size:20}));})));};export default Repository;","map":{"version":3,"sources":["/home/procopio/Projetos/trybe-github/src/pages/Repository/index.tsx"],"names":["React","useEffect","useState","useRouteMatch","Link","FiChevronLeft","FiChevronRight","api","logoImg","Header","RepositoryInfo","Issues","Repository","params","repository","setRepository","pullRequests","setPullRequests","helpNumber","setHelpNumber","crNumber","setCrNumber","dataToShow","setDataToShow","get","then","response","data","helps","crs","pull","helpWanted","codeReview","labels","length","i","name","handleHelpButton","newPullRequests","filter","handleCRButton","handlePRButton","owner","avatar_url","login","open_issues_count","user","sort","a","b","map","id","html_url","title"],"mappings":"8UAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,aAAT,CAAwBC,IAAxB,KAAoC,kBAApC,CACA,OAASC,aAAT,CAAwBC,cAAxB,KAA8C,gBAA9C,CACA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CAEA,OAASC,MAAT,CAAiBC,cAAjB,CAAiCC,MAAjC,KAA+C,UAA/C,CAuCA,GAAMC,CAAAA,UAAoB,CAAG,QAAvBA,CAAAA,UAAuB,EAAM,oBACdT,aAAa,EADC,CACzBU,MADyB,gBACzBA,MADyB,eAGGX,QAAQ,CAAoB,IAApB,CAHX,wCAG1BY,UAH0B,eAGdC,aAHc,8BAIOb,QAAQ,CAAgB,EAAhB,CAJf,yCAI1Bc,YAJ0B,eAIZC,eAJY,8BAKGf,QAAQ,CAAC,CAAD,CALX,yCAK1BgB,UAL0B,eAKdC,aALc,8BAMDjB,QAAQ,CAAC,CAAD,CANP,yCAM1BkB,QAN0B,eAMhBC,WANgB,8BAQGnB,QAAQ,CAAgB,EAAhB,CARX,0CAQ1BoB,UAR0B,gBAQdC,aARc,gBAUjCtB,SAAS,CAAC,UAAM,CACdM,GAAG,CAACiB,GAAJ,iBAAiBX,MAAM,CAACC,UAAxB,GAAsCW,IAAtC,CAA2C,SAACC,QAAD,CAAc,CACvDX,aAAa,CAACW,QAAQ,CAACC,IAAV,CAAb,CACD,CAFD,EAGApB,GAAG,CACAiB,GADH,iBACgBX,MAAM,CAACC,UADvB,yBAEGW,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBT,eAAe,CAACS,QAAQ,CAACC,IAAV,CAAf,CACD,CAJH,EAKD,CATQ,CASN,CAACd,MAAM,CAACC,UAAR,CATM,CAAT,CAUAb,SAAS,CAAC,UAAM,CACd,GAAI2B,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAV,CAFc,yCAGGb,YAHH,YAGd,+CAA+B,IAAtBc,CAAAA,IAAsB,aAC7BA,IAAI,CAACC,UAAL,CAAkB,KAAlB,CACAD,IAAI,CAACE,UAAL,CAAkB,KAAlB,CACA,GAAIF,IAAI,CAACG,MAAL,CAAYC,MAAZ,CAAqB,CAAzB,CAA4B,CAC1B,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,IAAI,CAACG,MAAL,CAAYC,MAAhC,CAAwCC,CAAC,EAAzC,CAA6C,CAC3C,GAAIL,IAAI,CAACG,MAAL,CAAYE,CAAZ,EAAeC,IAAf,GAAwB,aAA5B,CAA2C,CACzCR,KAAK,GACLE,IAAI,CAACC,UAAL,CAAkB,IAAlB,CACD,CACD,GAAID,IAAI,CAACG,MAAL,CAAYE,CAAZ,EAAeC,IAAf,GAAwB,aAA5B,CAA2C,CACzCP,GAAG,GACHC,IAAI,CAACE,UAAL,CAAkB,IAAlB,CACD,CACF,CACF,CACF,CAlBa,qDAmBdT,aAAa,CAACP,YAAD,CAAb,CACAK,WAAW,CAACQ,GAAD,CAAX,CACAV,aAAa,CAACS,KAAD,CAAb,CACD,CAtBQ,CAsBN,CAACZ,YAAD,CAtBM,CAAT,CAuBA,QAASqB,CAAAA,gBAAT,EAA4B,CAC1B,GAAMC,CAAAA,eAAe,CAAGtB,YAAY,CAACuB,MAAb,CAAoB,SAACT,IAAD,QAAUA,CAAAA,IAAI,CAACC,UAAf,EAApB,CAAxB,CACAR,aAAa,CAACe,eAAD,CAAb,CACD,CACD,QAASE,CAAAA,cAAT,EAA0B,CACxB,GAAMF,CAAAA,eAAe,CAAGtB,YAAY,CAACuB,MAAb,CAAoB,SAACT,IAAD,QAAUA,CAAAA,IAAI,CAACE,UAAf,EAApB,CAAxB,CACAT,aAAa,CAACe,eAAD,CAAb,CACD,CACD,QAASG,CAAAA,cAAT,EAA0B,CACxBlB,aAAa,CAACP,YAAD,CAAb,CACD,CAED,mBACE,qDACE,oBAAC,MAAD,mBACE,2BAAK,GAAG,CAAER,OAAV,CAAmB,KAAK,CAAE,GAA1B,CAA+B,GAAG,CAAC,2BAAnC,EADF,cAEE,oBAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,eACE,oBAAC,aAAD,EAAe,IAAI,CAAE,EAArB,EADF,UAFF,CADF,CASGM,UAAU,eACT,oBAAC,cAAD,mBACE,+CACE,2BACE,GAAG,CAAEA,UAAU,CAAC4B,KAAX,CAAiBC,UADxB,CAEE,GAAG,CAAE7B,UAAU,CAAC4B,KAAX,CAAiBE,KAFxB,EADF,cAKE,4CACE,kCAAS9B,UAAU,CAACsB,IAApB,CADF,CALF,CADF,cAUE,2CACE,2CACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,OAAO,CAAEC,gBAAtB,eACE,kCAASnB,UAAT,CADF,cAEE,qDAFF,CADF,CADF,cAOE,2CACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,OAAO,CAAEsB,cAAtB,eACE,kCAASpB,QAAT,CADF,cAEE,2DAFF,CADF,CAPF,cAaE,2CACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,OAAO,CAAEqB,cAAtB,eACE,kCAAS3B,UAAU,CAAC+B,iBAApB,CADF,cAEE,gDAFF,CADF,CAbF,CAVF,CAVJ,cA2CE,oBAAC,MAAD,MACGvB,UAAU,CACRiB,MADF,CACS,SAACT,IAAD,CAAU,CAChB,MAAOA,CAAAA,IAAI,CAACgB,IAAL,CAAUF,KAAV,GAAoB,QAA3B,CACD,CAHF,EAIEG,IAJF,CAIO,SAACC,CAAD,CAAIC,CAAJ,CAAkB,CACtB,GAAID,CAAC,CAAChB,UAAF,EAAgB,CAACiB,CAAC,CAACjB,UAAvB,CAAmC,CACjC,MAAO,CAAC,CAAR,CACD,CACD,GAAIgB,CAAC,CAACjB,UAAF,EAAgB,CAACkB,CAAC,CAAClB,UAAvB,CAAmC,CACjC,MAAO,CAAC,CAAR,CACD,CACD,MAAO,EAAP,CACD,CAZF,EAaEmB,GAbF,CAaM,SAACpB,IAAD,qBACH,yBAAG,GAAG,CAAEA,IAAI,CAACqB,EAAb,CAAiB,IAAI,CAAErB,IAAI,CAACsB,QAA5B,eACE,2BAAK,GAAG,CAAEtB,IAAI,CAACgB,IAAL,CAAUH,UAApB,CAAgC,GAAG,CAAEb,IAAI,CAACgB,IAAL,CAAUF,KAA/C,EADF,cAEE,4CACE,kCAASd,IAAI,CAACgB,IAAL,CAAUF,KAAnB,CADF,cAEE,6BAAId,IAAI,CAACuB,KAAT,CAFF,CAFF,CAMGvB,IAAI,CAACC,UAAL,eAAmB,4BAAM,SAAS,CAAC,KAAhB,UANtB,CAOGD,IAAI,CAACE,UAAL,eAAmB,4BAAM,SAAS,CAAC,OAAhB,gBAPtB,cAQE,oBAAC,cAAD,EAAgB,IAAI,CAAE,EAAtB,EARF,CADG,EAbN,CADH,CA3CF,CADF,CAyED,CAhID,CAkIA,cAAepB,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\nimport api from '../../services/api';\n\nimport logoImg from '../../assets/trybe.png';\n\nimport { Header, RepositoryInfo, Issues } from './styles';\n\ninterface RepositoryParams {\n  repository: string;\n}\n\ninterface Repository {\n  full_name: string;\n  name: string;\n  description: string;\n  stargazers_count: number;\n  forks_count: number;\n  open_issues_count: number;\n  owner: {\n    login: string;\n    avatar_url: string;\n  };\n}\n\ninterface PullRequest {\n  title: string;\n  id: number;\n  html_url: string;\n  mergeable_state: string | undefined;\n  user: {\n    login: string;\n    url: string;\n    avatar_url: string;\n  };\n  number: number;\n  labels: [\n    {\n      name: string;\n    },\n  ];\n  codeReview: boolean;\n  helpWanted: boolean;\n}\n\nconst Repository: React.FC = () => {\n  const { params } = useRouteMatch<RepositoryParams>();\n\n  const [repository, setRepository] = useState<Repository | null>(null);\n  const [pullRequests, setPullRequests] = useState<PullRequest[]>([]);\n  const [helpNumber, setHelpNumber] = useState(0);\n  const [crNumber, setCrNumber] = useState(0);\n\n  const [dataToShow, setDataToShow] = useState<PullRequest[]>([]);\n\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then((response) => {\n      setRepository(response.data);\n    });\n    api\n      .get(`repos/${params.repository}/pulls?per_page=100`)\n      .then((response) => {\n        setPullRequests(response.data);\n      });\n  }, [params.repository]);\n  useEffect(() => {\n    let helps = 0;\n    let crs = 0;\n    for (let pull of pullRequests) {\n      pull.helpWanted = false;\n      pull.codeReview = false;\n      if (pull.labels.length > 0) {\n        for (let i = 0; i < pull.labels.length; i++) {\n          if (pull.labels[i].name === 'help wanted') {\n            helps++;\n            pull.helpWanted = true;\n          }\n          if (pull.labels[i].name === 'code-review') {\n            crs++;\n            pull.codeReview = true;\n          }\n        }\n      }\n    }\n    setDataToShow(pullRequests);\n    setCrNumber(crs);\n    setHelpNumber(helps);\n  }, [pullRequests]);\n  function handleHelpButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.helpWanted);\n    setDataToShow(newPullRequests);\n  }\n  function handleCRButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.codeReview);\n    setDataToShow(newPullRequests);\n  }\n  function handlePRButton() {\n    setDataToShow(pullRequests);\n  }\n\n  return (\n    <>\n      <Header>\n        <img src={logoImg} width={150} alt=\"Trybe - Projects Explorer\" />\n        <Link to=\"/trybe-projects\">\n          <FiChevronLeft size={16} />\n          Voltar\n        </Link>\n      </Header>\n\n      {repository && (\n        <RepositoryInfo>\n          <header>\n            <img\n              src={repository.owner.avatar_url}\n              alt={repository.owner.login}\n            />\n            <div>\n              <strong>{repository.name}</strong>\n            </div>\n          </header>\n          <ul>\n            <li>\n              <Link to=\"#\" onClick={handleHelpButton}>\n                <strong>{helpNumber}</strong>\n                <span>Pedido(s) de ajuda</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handleCRButton}>\n                <strong>{crNumber}</strong>\n                <span>Pedido(s) de Code Review</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handlePRButton}>\n                <strong>{repository.open_issues_count}</strong>\n                <span>Pull Requests</span>\n              </Link>\n            </li>\n          </ul>\n        </RepositoryInfo>\n      )}\n\n      <Issues>\n        {dataToShow\n          .filter((pull) => {\n            return pull.user.login !== 'tryber';\n          })\n          .sort((a, b): number => {\n            if (a.codeReview && !b.codeReview) {\n              return -1;\n            }\n            if (a.helpWanted && !b.helpWanted) {\n              return -1;\n            }\n            return 1;\n          })\n          .map((pull) => (\n            <a key={pull.id} href={pull.html_url}>\n              <img src={pull.user.avatar_url} alt={pull.user.login} />\n              <div>\n                <strong>{pull.user.login}</strong>\n                <p>{pull.title}</p>\n              </div>\n              {pull.helpWanted && <span className=\"red\">Ajuda</span>}\n              {pull.codeReview && <span className=\"green\">Code Review</span>}\n              <FiChevronRight size={20} />\n            </a>\n          ))}\n      </Issues>\n    </>\n  );\n};\n\nexport default Repository;\n"]},"metadata":{},"sourceType":"module"}