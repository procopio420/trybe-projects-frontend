{"ast":null,"code":"var _jsxFileName = \"/home/procopio/Projetos/trybe-github/frontend/src/pages/Repository/index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiChevronRight, FiUsers } from 'react-icons/fi';\nimport Modal from 'react-bootstrap/Modal';\nimport api, { my_api } from '../../services/api';\nimport logoImg from '../../assets/trybe.png';\nimport { Header, RepositoryInfo, Issues, TableContainer } from './styles';\n\nconst Repository = () => {\n  const {\n    params\n  } = useRouteMatch();\n  const [repository, setRepository] = useState(null);\n  const [pullRequests, setPullRequests] = useState([]);\n  const [pullRequestsWithCr, setPullRequestsWithCr] = useState([]);\n  const [helpNumber, setHelpNumber] = useState(0);\n  const [crNumber, setCrNumber] = useState(0);\n  const [duplas, setDuplas] = useState([]);\n  const [dataToShow, setDataToShow] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then(response => {\n      setRepository(response.data);\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('COMANDO: SETAR REPOSITORIO');\n      console.log('--------------------------------');\n    });\n    api.get(`repos/${params.repository}/pulls?per_page=100`).then(response => {\n      setPullRequests(response.data);\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('COMANDO: SETAR PULL REQUESTS');\n      console.log('--------------------------------');\n    });\n  }, [params.repository]);\n  useEffect(() => {\n    if (repository) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: REPOSITORIO SETADO');\n      console.log(repository);\n      console.log('--------------------------------');\n    }\n  }, [repository]);\n  useEffect(() => {\n    if (pullRequests.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: PULLREQUESTS SETADO');\n      console.log(pullRequests);\n      console.log('--------------------------------');\n    }\n  }, [pullRequests]);\n  useEffect(() => {\n    if (pullRequestsWithCr.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: PULLREQUESTS COM CR SETADO');\n      console.log(pullRequestsWithCr);\n      console.log('--------------------------------');\n      postTheDataDuplas();\n    }\n  }, [pullRequestsWithCr]);\n  useEffect(() => {\n    if (pullRequests.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('COMANDO: SETAR PULLREQUESTS COM CR');\n      console.log('--------------------------------');\n      let helps = 0;\n      let crs = 0;\n      let prWithCr = [];\n\n      for (let pull of pullRequests) {\n        pull.helpWanted = false;\n        pull.codeReview = false;\n        pull.jaTemDupla = false;\n\n        if (pull.labels.length > 0) {\n          for (let i = 0; i < pull.labels.length; i++) {\n            if (pull.labels[i].name === 'help wanted') {\n              helps++;\n              pull.helpWanted = true;\n            }\n\n            if (pull.labels[i].name === 'code-review') {\n              crs++;\n              pull.codeReview = true;\n              prWithCr.push(pull.user.login);\n            }\n          }\n        }\n      }\n\n      setPullRequestsWithCr(prWithCr);\n      setDataToShow(pullRequests);\n      setCrNumber(crs);\n      setHelpNumber(helps);\n    }\n  }, [pullRequests]);\n\n  function postTheDataDuplas() {\n    console.log('----------------------------------');\n    console.log('STARTED POST', 'AT: ', new Date().getMilliseconds());\n    my_api.post(`/${repository === null || repository === void 0 ? void 0 : repository.id}`, pullRequestsWithCr);\n    console.log('POST FINISHED', 'AT: ', new Date().getMilliseconds(), pullRequestsWithCr);\n    console.log('----------------------------------');\n    getAndSetDuplasState();\n  }\n\n  function getAndSetDuplasState() {\n    console.log('----------------------------------');\n    console.log('STARTED GET', 'AT: ', new Date().getMilliseconds());\n    my_api.get(`/${repository === null || repository === void 0 ? void 0 : repository.id}`).then(response => {\n      setDuplas(response.data);\n      console.log('GET FINISHED', 'AT: ', new Date().getMilliseconds(), response.data);\n      console.log('----------------------------------');\n    });\n  }\n\n  useEffect(() => {\n    if (duplas.length > 0) {\n      console.log('----------------------------------');\n      console.log('DUPLAS UPDATED', 'AT: ', new Date().getMilliseconds());\n      console.log(duplas);\n      console.log('----------------------------------');\n    }\n  }, [duplas]);\n\n  function handleDuplasButton() {\n    handleOpenModal();\n  }\n\n  const handleOpenModal = () => setShowModal(true);\n\n  const handleCloseModal = () => setShowModal(false);\n\n  function handleHelpButton() {\n    const newPullRequests = pullRequests.filter(pull => pull.helpWanted);\n    setDataToShow(newPullRequests);\n  }\n\n  function handleCRButton() {\n    const newPullRequests = pullRequests.filter(pull => pull.codeReview);\n    setDataToShow(newPullRequests);\n  }\n\n  function handlePRButton() {\n    setDataToShow(pullRequests);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    width: 150,\n    alt: \"Trybe - Projects Explorer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/trybe-projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FiChevronLeft, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }), \"Voltar\")), repository && /*#__PURE__*/React.createElement(RepositoryInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: repository.owner.avatar_url,\n    alt: repository.owner.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, repository.name)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDuplasButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FiUsers, {\n    size: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }), \"Ver duplas de CR\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handleHelpButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, helpNumber), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, \"Pedido(s) de ajuda\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handleCRButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, crNumber), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, \"Pedido(s) de Code Review\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: handlePRButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, repository.open_issues_count), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, \"Pull Requests\"))))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: handleCloseModal,\n    size: 'lg',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, \"Duplas de Code Review\"), duplas.map((dupla, index) => /*#__PURE__*/React.createElement(\"section\", {\n    key: dupla.dupla1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }\n  }, dupla.dupla1), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }\n  }, \"->\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 17\n    }\n  }, dupla.dupla2)))))), /*#__PURE__*/React.createElement(Issues, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }\n  }, dataToShow.filter(pull => {\n    return pull.user.login !== 'tryber';\n  }).sort((a, b) => {\n    if (a.codeReview && !b.codeReview) {\n      return -1;\n    }\n\n    if (a.helpWanted && !b.helpWanted) {\n      return -1;\n    }\n\n    return 1;\n  }).map(pull => /*#__PURE__*/React.createElement(\"a\", {\n    key: pull.id,\n    href: pull.html_url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: pull.user.avatar_url,\n    alt: pull.user.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 17\n    }\n  }, pull.user.login), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 17\n    }\n  }, pull.title)), pull.helpWanted && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 35\n    }\n  }, \"Ajuda\"), pull.codeReview && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"green\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 35\n    }\n  }, \"Code Review\"), /*#__PURE__*/React.createElement(FiChevronRight, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default Repository;","map":{"version":3,"sources":["/home/procopio/Projetos/trybe-github/frontend/src/pages/Repository/index.tsx"],"names":["React","useEffect","useState","useRouteMatch","Link","FiChevronLeft","FiChevronRight","FiUsers","Modal","api","my_api","logoImg","Header","RepositoryInfo","Issues","TableContainer","Repository","params","repository","setRepository","pullRequests","setPullRequests","pullRequestsWithCr","setPullRequestsWithCr","helpNumber","setHelpNumber","crNumber","setCrNumber","duplas","setDuplas","dataToShow","setDataToShow","showModal","setShowModal","get","then","response","data","console","log","Date","getMilliseconds","length","postTheDataDuplas","helps","crs","prWithCr","pull","helpWanted","codeReview","jaTemDupla","labels","i","name","push","user","login","post","id","getAndSetDuplasState","handleDuplasButton","handleOpenModal","handleCloseModal","handleHelpButton","newPullRequests","filter","handleCRButton","handlePRButton","owner","avatar_url","open_issues_count","map","dupla","index","dupla1","dupla2","sort","a","b","html_url","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useRouteMatch, Link } from 'react-router-dom';\nimport { FiChevronLeft, FiChevronRight, FiUsers } from 'react-icons/fi';\nimport Modal from 'react-bootstrap/Modal';\n\nimport api, { my_api } from '../../services/api';\n\nimport logoImg from '../../assets/trybe.png';\n\nimport { Header, RepositoryInfo, Issues, TableContainer } from './styles';\n\ninterface RepositoryParams {\n  repository: string;\n}\n\ninterface Repository {\n  id: number;\n  full_name: string;\n  name: string;\n  description: string;\n  stargazers_count: number;\n  forks_count: number;\n  open_issues_count: number;\n  owner: {\n    login: string;\n    avatar_url: string;\n  };\n}\n\ninterface PullRequest {\n  title: string;\n  id: number;\n  html_url: string;\n  mergeable_state: string | undefined;\n  user: {\n    login: string;\n    url: string;\n    avatar_url: string;\n  };\n  number: number;\n  labels: [\n    {\n      name: string;\n    },\n  ];\n  codeReview: boolean;\n  helpWanted: boolean;\n  jaTemDupla: boolean;\n}\n\ninterface Dupla {\n  dupla1: string;\n  dupla2: string;\n}\n\nconst Repository: React.FC = () => {\n  const { params } = useRouteMatch<RepositoryParams>();\n\n  const [repository, setRepository] = useState<Repository | null>(null);\n  const [pullRequests, setPullRequests] = useState<PullRequest[]>([]);\n  const [pullRequestsWithCr, setPullRequestsWithCr] = useState<String[]>([]);\n  const [helpNumber, setHelpNumber] = useState(0);\n  const [crNumber, setCrNumber] = useState(0);\n\n  const [duplas, setDuplas] = useState<Dupla[]>([]);\n\n  const [dataToShow, setDataToShow] = useState<PullRequest[]>([]);\n  const [showModal, setShowModal] = useState<Boolean>(false);\n\n  useEffect(() => {\n    api.get(`repos/${params.repository}`).then((response) => {\n      setRepository(response.data);\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('COMANDO: SETAR REPOSITORIO');\n      console.log('--------------------------------');\n    });\n    api\n      .get(`repos/${params.repository}/pulls?per_page=100`)\n      .then((response) => {\n        setPullRequests(response.data);\n        console.log('--------------------------------');\n        console.log('HORA (ms): ', new Date().getMilliseconds());\n        console.log('COMANDO: SETAR PULL REQUESTS');\n        console.log('--------------------------------');\n      });\n  }, [params.repository]);\n\n  useEffect(() => {\n    if (repository) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: REPOSITORIO SETADO');\n      console.log(repository);\n      console.log('--------------------------------');\n    }\n  }, [repository]);\n  useEffect(() => {\n    if (pullRequests.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: PULLREQUESTS SETADO');\n      console.log(pullRequests);\n      console.log('--------------------------------');\n    }\n  }, [pullRequests]);\n  useEffect(() => {\n    if (pullRequestsWithCr.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('EFEITO: PULLREQUESTS COM CR SETADO');\n      console.log(pullRequestsWithCr);\n      console.log('--------------------------------');\n      postTheDataDuplas();\n    }\n  }, [pullRequestsWithCr]);\n\n  useEffect(() => {\n    if (pullRequests.length > 0) {\n      console.log('--------------------------------');\n      console.log('HORA (ms): ', new Date().getMilliseconds());\n      console.log('COMANDO: SETAR PULLREQUESTS COM CR');\n      console.log('--------------------------------');\n      let helps = 0;\n      let crs = 0;\n      let prWithCr = [];\n      for (let pull of pullRequests) {\n        pull.helpWanted = false;\n        pull.codeReview = false;\n        pull.jaTemDupla = false;\n        if (pull.labels.length > 0) {\n          for (let i = 0; i < pull.labels.length; i++) {\n            if (pull.labels[i].name === 'help wanted') {\n              helps++;\n              pull.helpWanted = true;\n            }\n            if (pull.labels[i].name === 'code-review') {\n              crs++;\n              pull.codeReview = true;\n              prWithCr.push(pull.user.login);\n            }\n          }\n        }\n      }\n      setPullRequestsWithCr(prWithCr);\n      setDataToShow(pullRequests);\n      setCrNumber(crs);\n      setHelpNumber(helps);\n    }\n  }, [pullRequests]);\n\n  function postTheDataDuplas() {\n    console.log('----------------------------------');\n    console.log('STARTED POST', 'AT: ', new Date().getMilliseconds());\n    my_api.post(`/${repository?.id}`, pullRequestsWithCr);\n    console.log(\n      'POST FINISHED',\n      'AT: ',\n      new Date().getMilliseconds(),\n      pullRequestsWithCr,\n    );\n    console.log('----------------------------------');\n    getAndSetDuplasState();\n  }\n\n  function getAndSetDuplasState() {\n    console.log('----------------------------------');\n    console.log('STARTED GET', 'AT: ', new Date().getMilliseconds());\n    my_api.get(`/${repository?.id}`).then((response) => {\n      setDuplas(response.data);\n      console.log(\n        'GET FINISHED',\n        'AT: ',\n        new Date().getMilliseconds(),\n        response.data,\n      );\n      console.log('----------------------------------');\n\n    });\n  }\n\n  useEffect(() => {\n    if (duplas.length > 0) {\n      console.log('----------------------------------');\n      console.log('DUPLAS UPDATED', 'AT: ', new Date().getMilliseconds());\n      console.log(duplas);\n      console.log('----------------------------------');\n    }\n  }, [duplas]);\n\n  function handleDuplasButton() {\n    handleOpenModal();\n  }\n\n  const handleOpenModal = () => setShowModal(true);\n  const handleCloseModal = () => setShowModal(false);\n\n  function handleHelpButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.helpWanted);\n    setDataToShow(newPullRequests);\n  }\n  function handleCRButton() {\n    const newPullRequests = pullRequests.filter((pull) => pull.codeReview);\n    setDataToShow(newPullRequests);\n  }\n  function handlePRButton() {\n    setDataToShow(pullRequests);\n  }\n\n  return (\n    <>\n      <Header>\n        <img src={logoImg} width={150} alt=\"Trybe - Projects Explorer\" />\n        <Link to=\"/trybe-projects\">\n          <FiChevronLeft size={16} />\n          Voltar\n        </Link>\n      </Header>\n\n      {repository && (\n        <RepositoryInfo>\n          <header>\n            <img\n              src={repository.owner.avatar_url}\n              alt={repository.owner.login}\n            />\n            <div>\n              <strong>{repository.name}</strong>\n            </div>\n            <button onClick={handleDuplasButton}>\n              <FiUsers size={24} />\n              Ver duplas de CR\n            </button>\n          </header>\n          <ul>\n            <li>\n              <Link to=\"#\" onClick={handleHelpButton}>\n                <strong>{helpNumber}</strong>\n                <span>Pedido(s) de ajuda</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handleCRButton}>\n                <strong>{crNumber}</strong>\n                <span>Pedido(s) de Code Review</span>\n              </Link>\n            </li>\n            <li>\n              <Link to=\"#\" onClick={handlePRButton}>\n                <strong>{repository.open_issues_count}</strong>\n                <span>Pull Requests</span>\n              </Link>\n            </li>\n          </ul>\n        </RepositoryInfo>\n      )}\n\n      <Modal show={showModal} onHide={handleCloseModal} size={'lg'}>\n        <Modal.Body>\n          <TableContainer>\n            <h1>Duplas de Code Review</h1>\n            {duplas.map((dupla, index) => (\n              <section key={dupla.dupla1}>\n                <p>{dupla.dupla1}</p>\n                <strong>-></strong>\n                <p>{dupla.dupla2}</p>\n              </section>\n            ))}\n          </TableContainer>\n        </Modal.Body>\n      </Modal>\n\n      <Issues>\n        {dataToShow\n          .filter((pull) => {\n            return pull.user.login !== 'tryber';\n          })\n          .sort((a, b): number => {\n            if (a.codeReview && !b.codeReview) {\n              return -1;\n            }\n            if (a.helpWanted && !b.helpWanted) {\n              return -1;\n            }\n            return 1;\n          })\n          .map((pull) => (\n            <a key={pull.id} href={pull.html_url}>\n              <img src={pull.user.avatar_url} alt={pull.user.login} />\n              <div>\n                <strong>{pull.user.login}</strong>\n                <p>{pull.title}</p>\n              </div>\n              {pull.helpWanted && <span className=\"red\">Ajuda</span>}\n              {pull.codeReview && <span className=\"green\">Code Review</span>}\n              <FiChevronRight size={20} />\n            </a>\n          ))}\n      </Issues>\n    </>\n  );\n};\n\nexport default Repository;\n"]},"metadata":{},"sourceType":"module"}